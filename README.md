## NovelADV - AIとの対話で、あなただけの物語を創り出そう -

NovelADVへようこそ！

このアプリは、AI（人工知能）との対話を通じて、まるでゲームをプレイするようにインタラクティブな物語を創作するための、全く新しいツールです。
あなたが主人公となって行動を入力すれば、AIが状況を描写し、登場人物（NPC）として応答してくれます。

小説家、ゲームシナリオライター、TRPGのゲームマスター（GM）、あるいは単に物語を作ることが好きなすべての方へ。NovelADVは、あなたの創造力を最大限に引き出すパートナーとなるでしょう。

### この説明書でわかること
*   アプリの基本的な使い方
*   AIと対話して物語を進める方法
*   魅力的なキャラクターや世界観の作り方
*   作成した設定をテンプレートとして再利用する方法
*   AIをあなたの好みに合わせて賢く設定する方法

---

### 第1章：最初の物語（プロジェクト）を作ろう

すべての物語は、ひとつの「プロジェクト」から始まります。まずはアプリを起動し、最初のプロジェクトを作成してみましょう。

#### 1. プロジェクトの新規作成
1.  アプリを起動すると、**「プロジェクト」**タブが開きます。まだ何もない場合は、「プロジェクトがありません」と表示されます。
2.  画面右上にある「+」ボタンをタップすると、**「新規プロジェクト」**画面が表示されます。
3.  **プロジェクト名**に、あなたの物語のタイトルを入力します。（例：「サイバーパンク探偵の事件簿」）
4.  次に、**「シナリオテンプレート」**を選択します。
    *   **初めての方へ:** まずは「新規作成（テンプレートなし）」を選ぶか、サンプルとして用意されている「探偵事務所の一日」を選択するのがおすすめです。
    *   **テンプレートとは？** 世界設定やキャラクター設定をまとめた雛形のことです。これを使えば、似たような設定の物語をすぐに始められます。（詳しくは第4章で解説します）
5.  入力が終わったら、右上の「作成」ボタンをタップします。

これで、あなたの新しい物語の舞台が整いました！プロジェクトリストに今作成したプロジェクトが表示されているはずです。

#### 2. プロジェクトを開く
リストに表示されたプロジェクトをタップすると、物語のメイン画面である**「チャット画面」**が開きます。いよいよ、AIとの共同創作の始まりです。

---

### 第2章：AIと対話して物語を進める（チャット画面の使い方）

チャット画面は、このアプリの中心となる場所です。ここであなたの行動やセリフを入力すると、AIが応答を返し、物語が進行していきます。

#### チャット画面の基本
*   **メッセージ履歴:** 画面の大部分を占めるエリアです。あなたとAIの対話が時系列で表示されます。
*   **入力ボックス:** 画面下部にあるテキストフィールドです。ここにあなたのキャラクターの行動やセリフを入力します。（例：「オフィスを見回し、机の上の書類に手を伸ばした」）
*   **送信ボタン:** 入力ボックスの右にある上向き矢印のボタンです。入力した内容をAIに送信します。
*   **ナビゲーションバー:** 画面上部にはプロジェクト名と、物語の進行度を示す「序破急システム」の進捗が表示されます。これは物語のペースを管理するのに役立ちます。

#### 物語の進行
1.  入力ボックスに、主人公として行いたい行動や話したいセリフを入力します。
2.  送信ボタンをタップします。
3.  AIがあなたの入力を解釈し、状況描写やNPCのセリフを返信します。AIが考え中は「アシスタントが考え中...」というインジケーターが表示されます。
4.  AIの応答を読み、次の行動を入力...というサイクルを繰り返すことで、物語が展開していきます。

#### 便利なツールバー機能
チャット画面の右上にある「...」ボタンをタップすると、様々な便利機能にアクセスできます。

*   **プロジェクト設定:** 物語の世界観や登場人物など、物語の根幹に関わる設定をいつでも編集できます。（詳しくは第3章で解説）
*   **チェックポイント:** 物語の「セーブポイント」を作成します。物語が思わぬ方向に進んでしまったときに、この時点に戻ってくることができます。
*   **検索:** 過去の会話ログから、特定のキーワードを含むメッセージを検索できます。
*   **最後の手番を元に戻す:** 直前のあなたとAIのやり取りを一手分まるごと取り消します。
*   **メッセージを編集:** 送信済みのメッセージの内容を後から修正することができます。（編集メニューの表示/非表示も切り替え可能です）

---

### 第3章：物語の世界を創り込む（プロジェクト設定）

魅力的な物語には、しっかりとした設定が不可欠です。プロジェクト設定では、あなたの物語の世界観、登場人物、そして物語の裏に隠された謎などを細かく設定できます。

チャット画面右上の「...」ボタンから「プロジェクト設定」を選択してください。

#### 1. シナリオ管理
*   **世界設定:** 物語の舞台となる場所、時代、背景ストーリー、そしてAIの文体（ハードボイルド風、ファンタジー風など）を具体的に指示できます。ここに詳しく書くほど、AIはあなたのイメージに近い描写をしてくれるようになります。
*   **キャラクター（PC/NPC）:**
    *   **プレイヤーキャラクター（PC）:** あなたが操作する主人公の設定です。
    *   **ノンプレイヤーキャラクター（NPC）:** AIが演じる登場人物です。名前、性別、職業、性格はもちろん、**一人称**（「私」「オレ」など）や**主人公の呼び方**（「あなた」「課長」など）も設定でき、キャラクターの個性を際立たせることができます。
*   **謎と伏線:**
    *   物語の核心となる謎や、後で回収したい伏線を登録しておける機能です。
    *   すごいのは、AIがこのリストを認識し、物語が進行すると自動で新しい謎を追加したり、解決済みの謎をマークしたりしてくれる点です。
    *   **「真相（AIには非公開）」**の欄に答えを書いておけば、AIはその答えを知らないまま、うまく伏線を張ってくれます。

#### 2. AIの設定
プロジェクトごとに、AIの振る舞いをカスタマイズできます。

*   **AIモデル設定:**
    *   **チャットモデル:** 会話の生成に使うAIモデルです。高性能なモデルを選ぶと、より創造的な応答が期待できます。
    *   **要約モデル:** 会話履歴の要約に使うAIモデルです。
*   **AIの記憶設定:**
    *   **短期記憶:** AIが直近の会話をどれくらい覚えているかを設定します。
    *   **要約タイミング:** 会話がどれくらい続いたら、AIが自動でこれまでの流れを要約するかを設定します。この要約がAIの「長期記憶」となります。
*   **ストーリーエンジン機能:**
    *   「謎・伏線追跡機能」や「章立てシステム」のON/OFFを切り替えられます。

---

### 第4章：設定を再利用しよう（テンプレート機能）

一度作った世界設定やキャラクターを、別の物語でも使いたくなることがあるでしょう。そんな時に役立つのが「テンプレート機能」です。

アプリのメイン画面下部にあるタブから「シナリオ」や「キャラクター」を選択すると、それぞれのテンプレート管理画面に移動できます。

#### シナリオテンプレート
世界設定、キャラクターリスト、オープニングシーンなど、シナリオ全体を一つのテンプレートとして保存できます。
*   **ユースケース:** ファンタジー、SF、現代ミステリーなど、よく使うジャンルの設定を保存しておけば、新しい物語をすぐに始められます。
*   **テンプレートの仕様:** テンプレートはJSON形式で管理されています。詳細な仕様やサンプルについては、[シナリオテンプレート仕様書](./scenario_json) を参照してください。

#### キャラクターテンプレート
キャラクター一人の設定をテンプレートとして保存できます。
*   **ユースケース:** 「冷静沈着な助手」「陽気な情報屋」のような、あなたの作品によく登場するアーキタイプのキャラクターを保存しておけば、色々な物語で活躍させることができます。
*   **テンプレートの仕様:** テンプレートはJSON形式で管理されています。詳細な仕様やサンプルについては、[キャラクターテンプレート仕様書](./character_json) を参照してください。

#### インポートとエクスポート
作成したテンプレートは、ファイルとして書き出す（エクスポート）ことができます。そのファイルを友人や他のユーザーに共有し、彼らのアプリで読み込んでもらう（インポート）ことも可能です。

---

### 第5章：アプリを使いこなすためのヒント（応用設定）

NovelADVをさらに便利に使うための、アプリ全体に関わる設定項目です。メイン画面右上の歯車アイコンから「設定」画面を開けます。

#### AIプロバイダーの選択
NovelADVは、2種類のAI利用方法に対応しています。

1.  **OpenRouter（推奨）:**
    *   様々な種類の高性能なAIモデルを利用できる外部サービスです。
    *   利用にはオンライン接続と、OpenRouterで取得した**「APIキー」**というパスワードのようなものが必要です。
    *   設定画面からサインインしてAPIキーを取得・設定することで、非常に高品質な物語生成が可能になります。
2.  **ローカルLLM（上級者向け）:**
    *   AIモデルのファイルをiPhone本体に直接入れて、オフラインで動作させるモードです。
    *   インターネット接続が不要でプライバシーが高い反面、AIの性能はデバイスのスペックに依存し、応答が遅くなる場合があります。

**初心者の方は、まずOpenRouterでAPIキーを設定することをおすすめします。**

#### バックアップと復元
`ProjectListView.swift`のコンテキストメニューやスワイプアクションから、プロジェクト全体を一つのファイルとしてバックアップできます。万が一に備え、大事な物語は定期的にバックアップを取っておくと安心です。

#### 無料プランとプレミアムプラン（サブスクリプション）
NovelADVは無料で基本的な機能を利用できますが、プレミアムプランに登録すると、以下のような制限が解除され、より快適に創作活動に集中できます。

*   **プロジェクトやテンプレートの作成数制限の解除**
*   **GPT-4oなど、より高性能なAIモデルへのアクセス**
*   **ローカルLLMの利用**
*   **プロジェクトのバックアップ＆復元機能**
*   **物語のターン数制限の解除**

設定画面や、機能制限に達した際に表示される案内から、いつでもプレミアムプランへアップグレードできます。

---

### 困ったときには（FAQ）

**Q. AIが応答してくれません。**
A. OpenRouterを利用している場合、APIキーが正しく設定されているか確認してください。チャット画面にエラーメッセージが表示されている場合は、その内容を読んでみましょう。APIキーエラーの場合は、エラーバナーをタップすると直接設定画面に移動できます。

**Q. AIの応答が不自然です。**
A. プロジェクト設定の「世界設定」にある「文体」や、各キャラクターの「性格」をより具体的に記述することで、AIの応答をあなたのイメージに近づけることができます。また、「AIモデル設定」で別のモデルを試してみるのも有効です。

**Q. 物語を一手前に戻したいです。**
A. チャット画面右上の「...」メニューから「最後の手番を元に戻す」を選択してください。あなたとAIの直近のやり取りが削除されます。

---

さあ、説明書はここまでです。
AIとの対話から生まれる、予測不能であなただけの物語を、心ゆくまでお楽しみください！
